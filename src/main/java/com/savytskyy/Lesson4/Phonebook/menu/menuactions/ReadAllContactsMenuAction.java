package com.savytskyy.Lesson4.Phonebook.menu.menuactions;

import com.savytskyy.Lesson4.Phonebook.contacts.Contact;
import com.savytskyy.Lesson4.Phonebook.contacts.ContactsService;
import com.savytskyy.Lesson4.Phonebook.menu.menuactions.MenuAction;

import java.util.List;

public class ReadAllContactsMenuAction implements MenuAction {
    ContactsService contactsService;

    public ReadAllContactsMenuAction(ContactsService contactsService) {
        this.contactsService = contactsService;
    }

    @Override
    public void doAction() {
        List<Contact> contacts = contactsService.getAll();

        if (contacts.size() > 0) {
            System.out.println("These are all contacts stored:");
            System.out.println("-----------------------------------------");
            contacts.stream()
                    .forEach(contact ->System.out.printf( "%s, %s, %s\n",
                            contact.getName(), contact.getType().toString().toLowerCase(), contact.getContactInfo()));
        } else {
            System.out.println("Sorry, contact list is empty");
            System.out.println();
        }
        System.out.println("-----------------------------------------");
    }

        @Override
        public String getName () {
            return "Read all contacts";
        }

        @Override
        public boolean closeAfter () {
            return false;
        }
    }
